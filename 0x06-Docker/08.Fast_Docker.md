---
title: Docker  
---

### Install Docker Engine

- DESKTOP
  | 平台                                                                                                     | x86_64 |
  | -------------------------------------------------------------------------------------------------------- | ------ |
  | [Docker Desktop for Mac (macOS)](https://docs.docker.com/docker-for-mac/install/)                        | 支持   |
  | [Docker Desktop for Windows (Microsoft Windows 10)](https://docs.docker.com/docker-for-windows/install/) | 支持   |

- SERVER

  ```sh
  sudo apt-get update
  sudo apt-get install docker.io
  ```

### [Install Docker Compose](https://docs.docker.com/compose/install/)

  ```sh
  sudo apt-get install docker-compose
  ```

### [Compose and Django](https://docs.docker.com/compose/django/)

  ```sh
  sudo chown -R $USER:$USER .
  ```

### 进入容器查看文件系统

- 运行成功的容器
  
  ![打开命令行](Assets/20200604165547.png)  
  ![输入ls](Assets/20200604165635.png)

### [Sample](https://docs.docker.com/samples/)

```sh
mkdir tesdocker & cd tesdocker
git clone https://github.com/docker/getting-started.git
cd getting-started
docker build -t docker101tutorial .
docker run -d -p 80:80 --name docker-tutorial docker101tutorial
docker tag docker101tutorial androllen/docker101tutorial
docker push androllen/docker101tutorial
```

### 保存 image

  ```sh
  # 查看要要保存的镜像的ID
  docker images
  # 保存镜像,下次部署到服务器更方便
  docker save spring  -o  /home/lord/docker/spring.tar
  ```

  保存 save.sh

  ```sh
  #!/bin/bash

  RESLIST=("redis:5.0.3" "mongo:latest" "mysql:5.7" "cats:latest" "sqlmap:latest" "hspider:v0.1" "web_scanner:latest" "x_engine:latest")
  SAVE_DIR=`pwd`/bak
  for name in ${RESLIST[@]}; do
  echo $name
  docker save $name -o $SAVE_DIR/$name.tar
  done
  chown "cats":"cats" -R $SAVE_DIR
  ```

### 加载 image

  ```sh
  # 可以在任何装 docker 的地方加载 刚保存的镜像了
  docker load -i spring.tar

  docker run -p 8081:8080  -d spring
  ```

  保存 load.sh

  ```sh
  #!/bin/bash

  list=`ls -l | awk '{print $9}'`
  for name in ${list[@]}; do
  echo $name
  docker load -i $name.tar
  done
  ```

### 运行 Docker

  ```sh
  sudo docker-compose up -d
  sudo docker ps
  ```

<https://docs.docker.com/compose/compose-file/#build>  
<https://github.com/docker/labs/tree/master/beginner/>  
<https://github.com/docker/labs/blob/master/beginner/chapters/votingapp.md>
