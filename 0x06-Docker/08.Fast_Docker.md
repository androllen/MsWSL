---
title: Docker  
---

### Install Docker Engine

- DESKTOP
  | 平台                                                                                                     | x86_64 |
  | -------------------------------------------------------------------------------------------------------- | ------ |
  | [Docker Desktop for Mac (macOS)](https://docs.docker.com/docker-for-mac/install/)                        | 支持   |
  | [Docker Desktop for Windows (Microsoft Windows 10)](https://docs.docker.com/docker-for-windows/install/) | 支持   |

- SERVER

  ```sh
  sudo apt update
  sudo apt install docker.io
  ```

### [Install Docker Compose](https://docs.docker.com/compose/install/)

  ```sh
  sudo apt install docker-compose
  ```

### [Compose and Django](https://docs.docker.com/compose/django/)

### 进入容器查看文件系统

- 运行成功的容器
  ![打开命令行](Assets/20200604165547.png)
  ![输入ls](Assets/20200604165635.png)

### [Docker Official Sample](https://docs.docker.com/samples/)

  ```sh
  mkdir tesdocker & cd tesdocker
  git clone https://github.com/docker/getting-started.git
  cd getting-started
  docker build -t docker101tutorial .
  docker run -d -p 80:80 --name docker-tutorial docker101tutorial
  docker tag docker101tutorial androllen/docker101tutorial
  docker push androllen/docker101tutorial
  ```

### 保存 image

  ```sh
  # 查看要保存的镜像的ID
  docker images
  # 保存镜像,下次部署到服务器更方便
  docker save -o spring /home/lord/docker/spring.tar
  # or
  docker save myimage:latest | gzip > myimage_latest.tar.gz
  ```

  保存 save.sh

  ```sh
  #!/bin/bash

  RESLIST=("nginx:latest" "postgres:latest")
  echo ${RESLIST[@]}
  SAVE_DIR=`pwd`/bak
  mkdir -p $SAVE_DIR
  echo "$SAVE_DIR"
  for skill in ${RESLIST[@]}; do
      echo "=======${skill}"
      docker save $skill | gzip > $SAVE_DIR/$skill.tar.gz
  done
  chown "$USER":"$USER" -R $SAVE_DIR
  echo "save over"
  ```

  在`Ubuntu`中执行脚本

  `sudo bash save.sh`  

### 加载 image

  ```sh
  # 加载保存的文件到 image
  docker load -i spring.tar
  # 后台模式启动一个容器
  docker run -d spring:latest
  ```

  保存 load.sh

  ```sh
  #!/bin/bash

  list=`ls -l | awk '{print $9}'`
  for name in ${list[@]}; do
  echo $name
  docker load -i $name
  done
  echo "load over"
  ```

  在`Ubuntu`中执行脚本

  `sudo bash load.sh`

### 运行 Docker

  ```sh
  # cd to project dir
  sudo docker-compose up -d
  sudo docker ps
  ```

<https://docs.docker.com/compose/compose-file/#build>  
<https://github.com/docker/labs/tree/master/beginner/>  
<https://github.com/docker/labs/blob/master/beginner/chapters/votingapp.md>
